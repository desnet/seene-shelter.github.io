<head>                                                               
<script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
</head>
<div id="gallery"/>
<script type="text/javascript">
$( document ).ajaxError(function(request, response) {
		alert("ajaxError: "+JSON.stringify(response))
		//alert(request)
});

client_id='ksvh099n3t79zqq'
client_secret='rfkrrfaz0yfwh43'
gallery=$("#gallery")

function add_image(comments_root_url, val) {
	var name = val.path.substring(1)
	var a = $('<a/>', {
		target: '_new',
		href: comments_root_url+"&preview="+name
	})
	var img = $('<img/>', {
		width: 300,
		height: 300,
		alt: name
	})
	a.html(img)
	
	gallery.append(a) // sync
	//$('#gallery').append('<img src="data:'+base64_encode(data)+'"')
}

function list_folder(public_folder_url) {
	$.post({
		url: 'https://api.dropbox.com/1/metadata/link',
		data: {
			"client_id": client_id,
			"client_secret": client_secret,
			"link": public_folder_url,
			"list": true
		},
		dataType : "json",
		success: function (data, textStatus) {
			var comments_root_url = data.link
			$.each(data.contents, function(i, val) {
				if(val.path.endsWith('.jpg')) {
					add_image(comments_root_url, val)
				}
			});
		},
	});
}
list_folder('https://www.dropbox.com/sh/1h3zy9jm4nftelm/AABAdhug5I_8NO8z5-N1lpVOa')
</script>
